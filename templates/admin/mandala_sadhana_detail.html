{% extends "base.html" %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <!-- Modern Header -->
            <div class="detail-header-modern">
                <div class="detail-header-content-modern">
                    <div class="detail-title-section-modern">
                        <div class="detail-title-icon-modern">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="detail-title-text-modern">
                            <h1 class="detail-title-modern">Registration Details</h1>
                            <p class="detail-subtitle-modern">Complete sacred journey participant information</p>
                        </div>
                    </div>
                    <div class="detail-actions-modern">
                        <a href="{{ url_for('admin_mandala_sadhana') }}" class="btn-back-modern">
                            <i class="fas fa-arrow-left"></i>
                            <span>Back to List</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <!-- Modern Registration Details Card -->
                    <div class="detail-card-modern">
                        <div class="detail-card-header-modern">
                            <div class="detail-card-icon-modern">
                                <i class="fas fa-user"></i> 
                            </div>
                            <div class="detail-card-title-modern">
                                <h3 class="detail-card-name-modern">{{ registration.full_name }}</h3>
                                <p class="detail-card-subtitle-modern">Sacred Journey Participant</p>
                            </div>
                            <div class="detail-card-id-modern">
                                <span class="registration-number-modern">#{{ registration.id }}</span>
                            </div>
                        </div>
                        <div class="detail-card-content-modern">
                            <div class="detail-info-grid-modern">
                                <div class="detail-info-section-modern">
                                    <div class="detail-info-header-modern">
                                        <div class="detail-info-icon-modern">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <h4 class="detail-info-title-modern">Contact Information</h4>
                                    </div>
                                    <div class="detail-info-items-modern">
                                        <div class="detail-info-item-modern">
                                            <div class="detail-info-label-modern">Email Address</div>
                                            <div class="detail-info-value-modern">{{ registration.email }}</div>
                                        </div>
                                        <div class="detail-info-item-modern">
                                            <div class="detail-info-label-modern">Registration ID</div>
                                            <div class="detail-info-value-modern">#{{ registration.id }}</div>
                                        </div>
                                        <div class="detail-info-item-modern">
                                            <div class="detail-info-label-modern">Status</div>
                                            <div class="detail-info-value-modern">
                                                <span class="status-indicator-modern active"><i class="fas fa-check-circle"></i> Active</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="detail-info-section-modern">
                                    <div class="detail-info-header-modern">
                                        <div class="detail-info-icon-modern">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <h4 class="detail-info-title-modern">Timeline</h4>
                                    </div>
                                    <div class="detail-info-items-modern">
                                        <div class="detail-info-item-modern">
                                            <div class="detail-info-label-modern">Registered</div>
                                            <div class="detail-info-value-modern">
                                        {% if registration.created_at %}
                                                    <div class="timeline-date-modern">{{ registration.created_at.strftime('%B %d, %Y') }}</div>
                                                    <div class="timeline-time-modern">{{ registration.created_at.strftime('%I:%M %p') }}</div>
                                        {% else %}
                                                    <span class="no-data-modern">Not available</span>
                                        {% endif %}
                                            </div>
                                        </div>
                                        <div class="detail-info-item-modern">
                                            <div class="detail-info-label-modern">Last Updated</div>
                                            <div class="detail-info-value-modern">
                                        {% if registration.updated_at %}
                                                    <div class="timeline-date-modern">{{ registration.updated_at.strftime('%B %d, %Y') }}</div>
                                                    <div class="timeline-time-modern">{{ registration.updated_at.strftime('%I:%M %p') }}</div>
                                        {% else %}
                                                    <span class="no-data-modern">Not available</span>
                                        {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Mandala Commitments Card -->
                    <div class="detail-card-modern">
                        <div class="detail-card-header-modern">
                            <div class="detail-card-icon-modern">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="detail-card-title-modern">
                                <h3 class="detail-card-name-modern">Mandala Commitments</h3>
                                <p class="detail-card-subtitle-modern">Sacred journey dedication levels</p>
                            </div>
                        </div>
                        <div class="detail-card-content-modern">
                            <div class="commitments-grid-modern">
                                <div class="commitment-item-modern">
                                    <div class="commitment-visual-modern">
                                        {% if registration.mandala_48_commitment %}
                                            <div class="commitment-icon-modern committed">
                                                <i class="fas fa-check-circle"></i>
                                            </div>
                                        {% else %}
                                            <div class="commitment-icon-modern pending">
                                                <i class="fas fa-circle-notch"></i>
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="commitment-info-modern">
                                        <h4 class="commitment-title-modern">48-Day Foundation</h4>
                                        <p class="commitment-description-modern">Ready to commit to a 48-day journey</p>
                                        <div class="commitment-status-modern">
                                            {% if registration.mandala_48_commitment %}
                                                <span class="commitment-badge-modern committed"><i class="fas fa-check"></i> Committed</span>
                                            {% else %}
                                                <span class="commitment-badge-modern pending"><i class="fas fa-clock"></i> Considering</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>

                                <div class="commitment-item-modern">
                                    <div class="commitment-visual-modern">
                                        {% if registration.mandala_144_commitment == 'Yes' %}
                                            <div class="commitment-icon-modern advanced">
                                                <i class="fas fa-star"></i>
                                            </div>
                                        {% elif registration.mandala_144_commitment == 'No' %}
                                            <div class="commitment-icon-modern basic">
                                                <i class="fas fa-seedling"></i>
                                            </div>
                                        {% else %}
                                            <div class="commitment-icon-modern preparing">
                                                <i class="fas fa-clock"></i>
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="commitment-info-modern">
                                        <h4 class="commitment-title-modern">144-Day Advanced</h4>
                                        <p class="commitment-description-modern">Full triad of 3 Mandalas transformation</p>
                                        <div class="commitment-status-modern">
                                            {% if registration.mandala_144_commitment == 'Yes' %}
                                                <span class="commitment-badge-modern advanced"><i class="fas fa-star"></i> Advanced</span>
                                            {% elif registration.mandala_144_commitment == 'No' %}
                                                <span class="commitment-badge-modern basic"><i class="fas fa-seedling"></i> Foundation Only</span>
                                            {% else %}
                                                <span class="commitment-badge-modern preparing"><i class="fas fa-clock"></i> Preparing</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Sadhana Details Card -->
                    <div class="detail-card-modern">
                        <div class="detail-card-header-modern">
                            <div class="detail-card-icon-modern">
                                <i class="fas fa-om"></i> 
                            </div>
                            <div class="detail-card-title-modern">
                                <h3 class="detail-card-name-modern">Sadhana Details</h3>
                                <p class="detail-card-subtitle-modern">Practice specifications and preferences</p>
                            </div>
                        </div>
                        <div class="detail-card-content-modern">
                            <div class="sadhana-details-grid-modern">
                                <div class="sadhana-detail-item-modern">
                                    <div class="sadhana-detail-header-modern">
                                        <div class="sadhana-detail-icon-modern">
                                            <i class="fas fa-om"></i>
                                        </div>
                                        <h4 class="sadhana-detail-title-modern">Practice Type</h4>
                                    </div>
                                    <div class="sadhana-detail-content-modern">
                                        <span class="sadhana-type-badge-detail-modern">{{ registration.sadhana_type }}</span>
                                    </div>
                                </div>

                                <div class="sadhana-detail-item-modern">
                                    <div class="sadhana-detail-header-modern">
                                        <div class="sadhana-detail-icon-modern">
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                        <h4 class="sadhana-detail-title-modern">Journey Start</h4>
                                    </div>
                                    <div class="sadhana-detail-content-modern">
                                        {% if registration.sadhana_start_date %}
                                            <div class="start-date-detail-modern">{{ registration.sadhana_start_date.strftime('%B %d, %Y') }}</div>
                                            <div class="start-day-detail-modern">{{ registration.sadhana_start_date.strftime('%A') }}</div>
                                        {% else %}
                                            <span class="no-sadhana-date-modern">Not specified</span>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="sadhana-detail-item-modern">
                                    <div class="sadhana-detail-header-modern">
                                        <div class="sadhana-detail-icon-modern">
                                        <i class="fas fa-envelope"></i> 
                                        </div>
                                        <h4 class="sadhana-detail-title-modern">Communication</h4>
                                    </div>
                                    <div class="sadhana-detail-content-modern">
                                        {% if registration.send_copy %}
                                            <span class="communication-badge-modern requested"><i class="fas fa-envelope"></i> Copy Requested</span>
                                        {% else %}
                                            <span class="communication-badge-modern none"><i class="fas fa-envelope-open"></i> No Copy</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Personal Commitment Card -->
                    <div class="detail-card-modern">
                        <div class="detail-card-header-modern">
                            <div class="detail-card-icon-modern">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="detail-card-title-modern">
                                <h3 class="detail-card-name-modern">Personal Commitment</h3>
                                <p class="detail-card-subtitle-modern">Inner dedication and spiritual vow</p>
                            </div>
                        </div>
                        <div class="detail-card-content-modern">
                            <div class="commitment-text-container-modern">
                                <div class="commitment-text-quote-modern">
                                    <div class="quote-mark-modern">"</div>
                                    <blockquote class="commitment-quote-modern">{{ registration.commitment_text }}</blockquote>
                                    <div class="quote-mark-modern end">"</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <!-- Modern Quick Actions Card -->
                    <div class="sidebar-card-modern">
                        <div class="sidebar-card-header-modern">
                            <div class="sidebar-card-icon-modern">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="sidebar-card-title-modern">
                                <h3 class="sidebar-card-name-modern">Quick Actions</h3>
                                <p class="sidebar-card-subtitle-modern">Manage this registration</p>
                            </div>
                        </div>
                        <div class="sidebar-card-content-modern">
                            <div class="action-buttons-modern">
                                <a href="mailto:{{ registration.email }}" class="action-button-modern primary">
                                    <div class="action-button-icon-modern">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <div class="action-button-content-modern">
                                        <div class="action-button-title-modern">Send Email</div>
                                        <div class="action-button-description-modern">Contact participant</div>
                                    </div>
                                </a>

                                <button class="action-button-modern secondary" onclick="copyToClipboard('{{ registration.email }}')">
                                    <div class="action-button-icon-modern">
                                        <i class="fas fa-copy"></i>
                                    </div>
                                    <div class="action-button-content-modern">
                                        <div class="action-button-title-modern">Copy Email</div>
                                        <div class="action-button-description-modern">Copy to clipboard</div>
                                    </div>
                                </button>

                                <button class="action-button-modern tertiary" onclick="printRegistration()">
                                    <div class="action-button-icon-modern">
                                        <i class="fas fa-print"></i>
                                    </div>
                                    <div class="action-button-content-modern">
                                        <div class="action-button-title-modern">Print Details</div>
                                        <div class="action-button-description-modern">Generate report</div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Registration Summary Card -->
                    <div class="sidebar-card-modern">
                        <div class="sidebar-card-header-modern">
                            <div class="sidebar-card-icon-modern">
                                <i class="fas fa-info-circle"></i> 
                            </div>
                            <div class="sidebar-card-title-modern">
                                <h3 class="sidebar-card-name-modern">Summary</h3>
                                <p class="sidebar-card-subtitle-modern">At a glance overview</p>
                            </div>
                        </div>
                        <div class="sidebar-card-content-modern">
                            <div class="summary-list-modern">
                                <div class="summary-item-modern">
                                    <div class="summary-icon-modern">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="summary-content-modern">
                                        <div class="summary-label-modern">Participant</div>
                                        <div class="summary-value-modern">{{ registration.full_name }}</div>
                                    </div>
                                </div>

                                <div class="summary-item-modern">
                                    <div class="summary-icon-modern">
                                        <i class="fas fa-calendar-check"></i>
                                    </div>
                                    <div class="summary-content-modern">
                                        <div class="summary-label-modern">48-Day</div>
                                        <div class="summary-value-modern">
                                            {% if registration.mandala_48_commitment %}
                                                <span class="summary-status-modern committed"><i class="fas fa-check"></i> Committed</span>
                                            {% else %}
                                                <span class="summary-status-modern pending"><i class="fas fa-times"></i> Not Ready</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>

                                <div class="summary-item-modern">
                                    <div class="summary-icon-modern">
                                        <i class="fas fa-mountain"></i>
                                    </div>
                                    <div class="summary-content-modern">
                                        <div class="summary-label-modern">144-Day</div>
                                        <div class="summary-value-modern">
                                            {% if registration.mandala_144_commitment == 'Yes' %}
                                                <span class="summary-status-modern advanced"><i class="fas fa-star"></i> Advanced</span>
                                            {% elif registration.mandala_144_commitment == 'No' %}
                                                <span class="summary-status-modern basic"><i class="fas fa-seedling"></i> Foundation</span>
                                            {% else %}
                                                <span class="summary-status-modern preparing"><i class="fas fa-clock"></i> Preparing</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>

                                <div class="summary-item-modern">
                                    <div class="summary-icon-modern">
                                        <i class="fas fa-om"></i>
                                    </div>
                                    <div class="summary-content-modern">
                                        <div class="summary-label-modern">Practice</div>
                                        <div class="summary-value-modern">{{ registration.sadhana_type }}</div>
                                    </div>
                                </div>

                                <div class="summary-item-modern">
                                    <div class="summary-icon-modern">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="summary-content-modern">
                                        <div class="summary-label-modern">Started</div>
                                        <div class="summary-value-modern">
                                    {% if registration.sadhana_start_date %}
                                                {{ registration.sadhana_start_date.strftime('%b %d, %Y') }}
                                    {% else %}
                                                <span class="no-data-modern">Not specified</span>
                                    {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // Show success message
        const btn = event.target.closest('button');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
        btn.classList.remove('btn-outline-info');
        btn.classList.add('btn-success');
        
        setTimeout(function() {
            btn.innerHTML = originalText;
            btn.classList.remove('btn-success');
            btn.classList.add('btn-outline-info');
        }, 2000);
    });
}

function printRegistration() {
    window.print();
}
</script>

<style>
.card {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    border: 1px solid rgba(0, 0, 0, 0.125);
}

.blockquote {
    border-left: 4px solid #8b4513;
    padding-left: 1rem;
    font-style: italic;
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 0.375rem;
}

.badge {
    font-size: 0.875em;
}

@media print {
    .btn, .card-header {
        display: none !important;
    }
    
    .card {
        border: 1px solid #000 !important;
        box-shadow: none !important;
    }
}
</style>
{% endblock %}








